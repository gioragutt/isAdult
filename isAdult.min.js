const NO_RISK_STATUS=1,LOW_RISK_STATUS=2,HIGH_RISK_STATUS=3,STATUS_MESSAGES={1:"No risk",2:"Medium risk. It is recommended to manually check this image",3:"High risk. This image is being flagged to most likely be an adult image"},LOW_RISK_KEYWORDS=["tank suit","bathing trunks","swimming trunks","sarong","sunscreen","sunblock","sun blocker","diaper","nappy","napkin","miniskirt","dumbbell","plunger","plumber's helper"],HIGH_RISK_KEYWORDS=["bikini","two-piece","maillot","brassiere","bandeau","balance beam","beam","punching bag","punch bag","punching ball","punchball"];var loadScript=new Promise(function(a){var c=document.createElement("script");c.src="https://unpkg.com/ml5@0.1.1/dist/ml5.min.js",c.id=makeid(7),document.body.appendChild(c),a(c.id)});function makeid(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<a;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}checkAdultImage=async function(a){var b=await loadScript,c=document.getElementById(b);if(!c)throw new Error("Could not load dynamic script into the HTML");await ml5Ready();var d=await ml5.imageClassifier("MobileNet");try{var f=await d.predict(a)}catch(m){throw new Error("This image could not be parsed.")}for(var j,g=NO_RISK_STATUS,h=0;h<f.length;h++){j=f[h].className.split(", ");for(var l=0;l<j.length;l++){if(HIGH_RISK_KEYWORDS.includes(j[l]))return{status:HIGH_RISK_STATUS,msg:STATUS_MESSAGES[HIGH_RISK_STATUS]};LOW_RISK_KEYWORDS.includes(j[l])&&(g=LOW_RISK_STATUS)}}return{status:g,msg:STATUS_MESSAGES[g]}};function ml5Ready(){return new Promise(function(a){var d=setInterval(function(){ml5&&(clearInterval(d),a())},1e3)})}